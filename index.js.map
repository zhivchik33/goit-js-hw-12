{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nexport const createGalleryCardTemplate = imgInfo => {\n  return `\n  <li class=\"gallery-card\">\n    <a class=\"gallery-a\" href=\"${imgInfo.largeImageURL}\">\n       <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\"  />\n    </a>\n\n<ul class=\"img-description-list\">\n  <li class=\"img-description-el\">\n  <p>Likes</p>\n  <p>${imgInfo.likes}</p></li>\n  <li class=\"img-description-el\">\n  <p>Views</p>\n  <p>${imgInfo.views}</p></li>\n  <li class=\"img-description-el\">\n  <p>Comments</p>\n  <p>${imgInfo.comments}</p></li>\n  <li class=\"img-description-el\">\n  <p>Downloads</p>\n  <p>${imgInfo.downloads}</p></li>\n</ul>\n  </li>`;\n};","\nimport axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchPhotos = (searchedQuery, page) => {\n  const axiosOptions = {\n    params: {\n      key: \"45491885-d594c4380fd68d18bb383d8af\",\n      q:searchedQuery,\n      image_type: 'photo',\n      orientation: \"horizontal\",\n      per_page: 15,\n      page: page,\n      safesearch: true,\n    },\n  };\n  return axios.get(``, axiosOptions);\n}","\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { createGalleryCardTemplate } from './js/render-functions.js';\nimport { fetchPhotos } from './js/pixabay-api.js';\n\nconst searchFormEl = document.querySelector(\".js-search-form\");\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtn = document.querySelector(\".load-more\");\nlet currentPage = 1;\nlet searchedValue = \"\";\nlet cardHeight = 0;\nconst loader = document.querySelector(\".loader\");\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n    currentPage = 1; \n    searchedValue = searchFormEl.elements.user_query.value.trim();\n\n    if (!searchedValue) {\n      iziToast.error({\n        message: \"Please enter a valid search query.\",\n        position: 'topRight',\n      });\n      return;\n    }\n\n    galleryEl.innerHTML = '';\n    loadMoreBtn.classList.add('is-hidden');\n    loader.classList.remove('is-hidden');\n\n    const response = await fetchPhotos(searchedValue, currentPage);\n\n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        message: \"Sorry, no images found. Please try again!\",\n        position: 'topRight',\n      });\n      loader.classList.add('is-hidden');\n      return;\n    }\n\n    const galleryCardsTemplate = response.data.hits.map(imgDetails => createGalleryCardTemplate(imgDetails)).join('');\n    galleryEl.innerHTML = galleryCardsTemplate;\n\n    loader.classList.add('is-hidden');\n\n    if (currentPage < Math.ceil(response.data.totalHits / 15)) {\n      loadMoreBtn.classList.remove('is-hidden');\n    }\n\n    const galleryCardEl = galleryEl.querySelector('li');\n    if (galleryCardEl) {\n      cardHeight = galleryCardEl.getBoundingClientRect().height;\n    }\n\n    new SimpleLightbox('.js-gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n\n    searchFormEl.reset();\n  } catch (err) {\n    iziToast.error({\n      message: \"Oops, something went wrong. Please try again later.\",\n      position: 'topRight',\n    });\n    loader.classList.add('is-hidden');\n  }\n};\n\nconst onLoadMore = async () => {\n  try {\n    currentPage++;\n\n    loader.classList.remove('is-hidden');\n    loadMoreBtn.disabled = true;\n\n    const response = await fetchPhotos(searchedValue, currentPage);\n    const galleryCardsTemplate = response.data.hits.map(imgDetails => createGalleryCardTemplate(imgDetails)).join('');\n    galleryEl.insertAdjacentHTML(\"beforeend\", galleryCardsTemplate);\n\n    loader.classList.add('is-hidden');\n    loadMoreBtn.disabled = false;\n\n    scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (currentPage >= Math.ceil(response.data.totalHits / 15)) {\n      loadMoreBtn.classList.add('is-hidden');\n      iziToast.error({\n        message: \"You've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n\n  } catch (err) {\n    iziToast.error({\n      message: \"Oops, something went wrong while loading more images. Please try again later.\",\n      position: 'topRight',\n    });\n    loader.classList.add('is-hidden');\n    loadMoreBtn.disabled = false;\n  }\n};\n\nsearchFormEl.addEventListener(\"submit\", onSearchFormSubmit);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\n\n\n"],"names":["createGalleryCardTemplate","imgInfo","axios","fetchPhotos","searchedQuery","page","axiosOptions","searchFormEl","galleryEl","loadMoreBtn","currentPage","searchedValue","cardHeight","loader","onSearchFormSubmit","event","iziToast","response","galleryCardsTemplate","imgDetails","galleryCardEl","SimpleLightbox","onLoadMore"],"mappings":"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"}